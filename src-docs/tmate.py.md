<!-- markdownlint-disable -->

<a href="../src/tmate.py#L0"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

# <kbd>module</kbd> `tmate.py`
Configurations and functions to operate tmate-ssh-server. 

**Global Variables**
---------------
- **APT_DEPENDENCIES**
- **GIT_REPOSITORY_URL**
- **TMATE_SERVICE_NAME**
- **USER**
- **GROUP**
- **PORT**
- **SYSTEMD_UNIT_NOT_RUNNING_CODE**

---

<a href="../src/tmate.py#L122"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `install_dependencies`

```python
install_dependencies(proxy_config: Optional[ProxyConfig] = None) → None
```

Install dependenciese required to start tmate-ssh-server container. 



**Args:**
 
 - <b>`proxy_config`</b>:  The proxy configuration to enable for dockerd. 



**Raises:**
 
 - <b>`DependencySetupError`</b>:  if there was something wrong installing the apt package  dependencies. 


---

<a href="../src/tmate.py#L139"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `install_keys`

```python
install_keys(host_ip: Union[IPv4Address, IPv6Address, str]) → None
```

Install key creation script and generate keys. 



**Args:**
 
 - <b>`host_ip`</b>:  The charm host's public IP address. 



**Raises:**
 
 - <b>`KeyInstallError`</b>:  if there was an error creating ssh keys. 


---

<a href="../src/tmate.py#L189"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `status`

```python
status() → DaemonStatus
```

Check if the tmate-ssh-server service is running. 



**Returns:**
  True if the tmate-ssh-server service is running, False otherwise. 



**Raises:**
 
 - <b>`DaemonError`</b>:  if there was an error checking the status of tmate-ssh-server. 


---

<a href="../src/tmate.py#L208"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `start_daemon`

```python
start_daemon(address: str) → None
```

Install unit files, enable and start daemon. 



**Args:**
 
 - <b>`address`</b>:  The IP address to bind to. 



**Raises:**
 
 - <b>`DaemonError`</b>:  if there was an error starting the tmate-ssh-server docker process. 


---

<a href="../src/tmate.py#L263"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `get_fingerprints`

```python
get_fingerprints() → Fingerprints
```

Get fingerprint from generated keys. 



**Raises:**
 
 - <b>`IncompleteInitError`</b>:  if the keys have not been generated by the create_keys.sh script. 



**Returns:**
 The generated public key fingerprints. 


---

<a href="../src/tmate.py#L287"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `generate_tmate_conf`

```python
generate_tmate_conf(host: str) → str
```

Generate the .tmate.conf values from generated keys. 



**Args:**
 
 - <b>`host`</b>:  The host IP address. 



**Raises:**
 
 - <b>`FingerprintError`</b>:  if there was an error generating fingerprints from public keys. 



**Returns:**
 The tmate config file contents. 


---

<a href="../src/tmate.py#L314"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `remove_stopped_containers`

```python
remove_stopped_containers() → None
```

Remove all stopped containers. 



**Raises:**
 
 - <b>`DockerError`</b>:  if there was an error removing stopped containers. 


---

## <kbd>class</kbd> `DaemonError`
Represents an error with the tmate-ssh-server daemon. 





---

## <kbd>class</kbd> `DaemonStatus`
The status of the tmate-ssh-server daemon. 



**Attributes:**
 
 - <b>`running`</b>:  True if the daemon is running, False otherwise. 
 - <b>`status`</b>:  The status string of the daemon process. 





---

## <kbd>class</kbd> `DependencySetupError`
Represents an error while installing and setting up dependencies. 





---

## <kbd>class</kbd> `DockerError`
Represents an error using a docker command. 





---

## <kbd>class</kbd> `FingerprintError`
Represents an error with generating fingerprints from public keys. 





---

## <kbd>class</kbd> `Fingerprints`
The public key fingerprints. 



**Attributes:**
 
 - <b>`rsa`</b>:  The RSA public key fingerprint. 
 - <b>`ed25519`</b>:  The ed25519 public key fingerprint. 





---

## <kbd>class</kbd> `IncompleteInitError`
The tmate-ssh-server has not been fully initialized. 





---

## <kbd>class</kbd> `KeyInstallError`
Represents an error while installing/generating key files. 





